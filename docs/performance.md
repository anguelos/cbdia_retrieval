### Indexing Performance

The indexing is based on scikit-learn kdtree implementation.


Experiments in the following section provide an crude upper bound on possible performance.
These experiments don't include IO issues all tests are initialised and run in RAM.

### Scalabillity Experiment Results
| Experiment #    | Data Type       | Db Size         | Embedding Size  | Neighbor Count  | Indexing        | Queries    1    | Queries    4    | Queries    8    | Queries   16    | Queries   32    | Queries  128     |
|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|-----------------|------------------|
|               1 | float           |            1000 |              50 |              50 |               1 |             102 |             102 |             101 |             101 |             102 |             101  |
|               2 | float           |            1000 |              50 |             100 |               1 |             101 |             102 |             101 |             101 |             101 |             102  |
|               3 | float           |            1000 |              50 |             300 |               1 |             101 |             102 |             102 |             101 |             101 |             102  |
|               4 | float           |            1000 |              50 |             600 |               0 |             101 |             101 |             102 |             102 |             106 |             110  |
|               5 | float           |            1000 |             100 |              50 |               1 |             101 |             101 |             102 |             101 |             101 |             101  |
|               6 | float           |            1000 |             100 |             100 |               1 |             101 |             101 |             102 |             101 |             102 |             102  |
|               7 | float           |            1000 |             100 |             300 |               1 |             101 |             101 |             101 |             101 |             101 |             102  |
|               8 | float           |            1000 |             100 |             600 |               0 |             101 |             102 |             102 |             102 |             103 |             109  |
|               9 | float           |            1000 |             300 |              50 |               5 |             101 |             101 |             101 |             101 |             102 |             106  |
|              10 | float           |            1000 |             300 |             100 |               7 |             102 |             102 |             102 |             101 |             101 |             102  |
|              11 | float           |            1000 |             300 |             300 |               4 |             102 |             101 |             101 |             102 |             102 |             102  |
|              12 | float           |            1000 |             300 |             600 |               0 |             102 |             102 |             102 |             102 |             104 |             107  |
|              13 | float           |            1000 |             600 |              50 |               8 |             101 |             101 |             101 |             102 |             101 |             102  |
|              14 | float           |            1000 |             600 |             100 |               8 |             101 |             101 |             101 |             101 |             101 |             101  |
|              15 | float           |            1000 |             600 |             300 |               8 |             102 |             102 |             102 |             102 |             102 |             102  |
|              16 | float           |            1000 |             600 |             600 |               0 |             102 |             117 |             102 |             102 |             103 |             108  |
|              17 | double          |            1000 |              50 |              50 |               1 |             101 |             101 |             102 |             101 |             101 |             102  |
|              18 | double          |            1000 |              50 |             100 |               1 |             101 |             102 |             102 |             102 |             101 |             101  |
|              19 | double          |            1000 |              50 |             300 |               1 |             101 |             101 |             101 |             102 |             102 |             102  |
|              20 | double          |            1000 |              50 |             600 |               0 |             101 |             101 |             103 |             102 |             103 |             108  |
|              21 | double          |            1000 |             100 |              50 |               1 |             101 |             102 |             102 |             101 |             101 |             101  |
|              22 | double          |            1000 |             100 |             100 |               1 |             101 |             101 |             101 |             102 |             102 |             101  |
|              23 | double          |            1000 |             100 |             300 |               1 |             101 |             102 |             102 |             101 |             102 |             101  |
|              24 | double          |            1000 |             100 |             600 |               0 |             101 |             102 |             102 |             102 |             104 |             108  |
|              25 | double          |            1000 |             300 |              50 |               4 |             101 |             101 |             102 |             102 |             101 |             102  |
|              26 | double          |            1000 |             300 |             100 |               4 |             101 |             102 |             101 |             101 |             101 |             102  |
|              27 | double          |            1000 |             300 |             300 |               5 |             101 |             101 |             119 |             101 |             102 |             101  |
|              28 | double          |            1000 |             300 |             600 |               0 |             102 |             102 |             102 |             102 |             103 |             108  |
|              29 | double          |            1000 |             600 |              50 |               9 |             101 |             101 |             101 |             102 |             101 |             101  |
|              30 | double          |            1000 |             600 |             100 |               8 |             101 |             102 |             101 |             101 |             101 |             101  |
|              31 | double          |            1000 |             600 |             300 |               8 |             101 |             102 |             102 |             102 |             101 |             102  |
|              32 | double          |            1000 |             600 |             600 |               0 |             102 |             105 |             102 |             102 |             103 |             107  |
|              33 | float           |           10000 |              50 |              50 |              13 |             101 |             101 |             101 |             102 |             101 |             102  |
|              34 | float           |           10000 |              50 |             100 |              12 |             101 |             102 |             101 |             101 |             101 |             102  |
|              35 | float           |           10000 |              50 |             300 |              13 |             102 |             101 |             102 |             101 |             102 |             102  |
|              36 | float           |           10000 |              50 |             600 |              13 |             101 |             101 |             102 |             102 |             102 |             104  |
|              37 | float           |           10000 |             100 |              50 |              24 |             101 |             101 |             102 |             101 |             101 |             102  |
|              38 | float           |           10000 |             100 |             100 |              24 |             102 |             101 |             101 |             102 |             102 |             101  |
|              39 | float           |           10000 |             100 |             300 |              24 |             101 |             102 |             101 |             102 |             102 |             101  |
|              40 | float           |           10000 |             100 |             600 |              26 |             101 |             101 |             102 |             101 |             102 |             102  |
|              41 | float           |           10000 |             300 |              50 |              82 |             101 |             102 |             102 |             102 |             102 |             202  |
|              42 | float           |           10000 |             300 |             100 |              83 |             101 |             102 |             102 |             102 |             101 |             202  |
|              43 | float           |           10000 |             300 |             300 |              77 |             101 |             102 |             102 |             101 |             102 |             202  |
|              44 | float           |           10000 |             300 |             600 |              76 |             101 |             102 |             101 |             102 |             101 |             203  |
|              45 | float           |           10000 |             600 |              50 |             153 |             101 |             101 |             102 |             102 |             102 |             402  |
|              46 | float           |           10000 |             600 |             100 |             156 |             101 |             102 |             102 |             101 |             201 |             511  |
|              47 | float           |           10000 |             600 |             300 |             167 |             101 |             101 |             101 |             102 |             102 |             402  |
|              48 | float           |           10000 |             600 |             600 |             156 |             102 |             101 |             102 |             101 |             102 |             403  |
|              49 | double          |           10000 |              50 |              50 |              12 |             102 |             102 |             105 |             106 |             101 |             102  |
|              50 | double          |           10000 |              50 |             100 |              14 |             101 |             106 |             102 |             102 |             101 |             102  |
|              51 | double          |           10000 |              50 |             300 |              13 |             101 |             101 |             102 |             102 |             101 |             102  |
|              52 | double          |           10000 |              50 |             600 |              13 |             101 |             101 |             102 |             102 |             104 |             101  |
|              53 | double          |           10000 |             100 |              50 |              42 |             102 |             102 |             101 |             101 |             101 |             101  |
|              54 | double          |           10000 |             100 |             100 |              26 |             101 |             102 |             101 |             102 |             102 |             101  |
|              55 | double          |           10000 |             100 |             300 |              25 |             101 |             101 |             101 |             101 |             101 |             101  |
|              56 | double          |           10000 |             100 |             600 |              25 |             102 |             102 |             102 |             102 |             102 |             102  |
|              57 | double          |           10000 |             300 |              50 |              82 |             101 |             101 |             102 |             102 |             102 |             202  |
|              58 | double          |           10000 |             300 |             100 |              83 |             101 |             101 |             101 |             101 |             102 |             202  |
|              59 | double          |           10000 |             300 |             300 |              84 |             101 |             101 |             102 |             102 |             101 |             202  |
|              60 | double          |           10000 |             300 |             600 |              88 |             102 |             102 |             102 |             101 |             101 |             202  |
|              61 | double          |           10000 |             600 |              50 |             166 |             101 |             101 |             101 |             102 |             102 |             402  |
|              62 | double          |           10000 |             600 |             100 |             156 |             101 |             102 |             102 |             101 |             102 |             403  |
|              63 | double          |           10000 |             600 |             300 |             170 |             102 |             102 |             101 |             101 |             202 |             402  |
|              64 | double          |           10000 |             600 |             600 |             165 |             101 |             102 |             102 |             101 |             102 |             402  |
|              65 | float           |          100000 |              50 |              50 |             254 |             101 |             101 |             101 |             101 |             202 |             502  |
|              66 | float           |          100000 |              50 |             100 |             260 |             101 |             101 |             102 |             101 |             202 |             502  |
|              67 | float           |          100000 |              50 |             300 |             260 |             101 |             102 |             101 |             101 |             202 |             502  |
|              68 | float           |          100000 |              50 |             600 |             294 |             101 |             102 |             101 |             101 |             202 |             503  |
|              69 | float           |          100000 |             100 |              50 |             484 |             113 |             101 |             101 |             102 |             202 |             803  |
|              70 | float           |          100000 |             100 |             100 |             472 |             101 |             101 |             102 |             101 |             202 |             803  |
|              71 | float           |          100000 |             100 |             300 |             474 |             101 |             101 |             101 |             202 |             202 |             803  |
|              72 | float           |          100000 |             100 |             600 |             487 |             101 |             102 |             102 |             101 |             202 |             804  |
|              73 | float           |          100000 |             300 |              50 |            1393 |             102 |             102 |             202 |             302 |             503 |            2005  |
|              74 | float           |          100000 |             300 |             100 |            1340 |             101 |             101 |             202 |             302 |             502 |            2005  |
|              75 | float           |          100000 |             300 |             300 |            1361 |             101 |             101 |             202 |             302 |             502 |            2006  |
|              76 | float           |          100000 |             300 |             600 |            1361 |             101 |             102 |             202 |             302 |             502 |            2108  |
|              77 | float           |          100000 |             600 |              50 |            2803 |             202 |             202 |             302 |             504 |             903 |            3509  |
|              78 | float           |          100000 |             600 |             100 |            2586 |             202 |             201 |             302 |             502 |             904 |            3813  |
|              79 | float           |          100000 |             600 |             300 |            2790 |             202 |             201 |             302 |             502 |            1004 |            3723  |
|              80 | float           |          100000 |             600 |             600 |            2789 |             202 |             202 |             302 |             502 |             904 |            3609  |
|              81 | double          |          100000 |              50 |              50 |             264 |             101 |             101 |             101 |             101 |             202 |             502  |
|              82 | double          |          100000 |              50 |             100 |             257 |             109 |             101 |             102 |             103 |             202 |             502  |
|              83 | double          |          100000 |              50 |             300 |             268 |             101 |             102 |             101 |             101 |             202 |             602  |
|              84 | double          |          100000 |              50 |             600 |             269 |             102 |             102 |             101 |             101 |             202 |             502  |
|              85 | double          |          100000 |             100 |              50 |             497 |             101 |             101 |             102 |             202 |             202 |             903  |
|              86 | double          |          100000 |             100 |             100 |             472 |             101 |             101 |             102 |             102 |             302 |             904  |
|              87 | double          |          100000 |             100 |             300 |             505 |             102 |             101 |             101 |             102 |             302 |             908  |
|              88 | double          |          100000 |             100 |             600 |             482 |             101 |             101 |             102 |             102 |             202 |             903  |
|              89 | double          |          100000 |             300 |              50 |            1343 |             101 |             101 |             202 |             302 |             603 |            2005  |
|              90 | double          |          100000 |             300 |             100 |            1355 |             101 |             101 |             207 |             302 |             502 |            2208  |
|              91 | double          |          100000 |             300 |             300 |            1701 |             102 |             102 |             202 |             302 |             502 |            2105  |
|              92 | double          |          100000 |             300 |             600 |            1397 |             101 |             102 |             201 |             302 |             503 |            2106  |
|              93 | double          |          100000 |             600 |              50 |            2646 |             202 |             202 |             302 |             502 |            1006 |            3737  |
|              94 | double          |          100000 |             600 |             100 |            2672 |             202 |             201 |             302 |             503 |            1108 |            3720  |
|              95 | double          |          100000 |             600 |             300 |            2615 |             202 |             201 |             302 |             503 |             910 |            3608  |
|              96 | double          |          100000 |             600 |             600 |            2852 |             202 |             202 |             302 |             502 |            1004 |            3618  |
|              97 | float           |         1000000 |              50 |              50 |            4677 |             202 |             302 |             502 |             903 |            1705 |            7051  |
|              98 | float           |         1000000 |              50 |             100 |            4595 |             202 |             302 |             502 |             903 |            1705 |            7266  |
|              99 | float           |         1000000 |              50 |             300 |            4492 |             202 |             302 |             502 |             903 |            1805 |            7128  |
|             100 | float           |         1000000 |              50 |             600 |            4714 |             201 |             302 |             503 |            1003 |            1805 |            7217  |
|             101 | float           |         1000000 |             100 |              50 |            8340 |             402 |             502 |             702 |            1404 |            3110 |           11473  |
|             102 | float           |         1000000 |             100 |             100 |            8534 |             402 |             502 |             703 |            1505 |            2807 |           11100  |
|             103 | float           |         1000000 |             100 |             300 |            8593 |             302 |             402 |             703 |            1404 |            2707 |           10941  |
|             104 | float           |         1000000 |             100 |             600 |            8964 |             302 |             502 |             703 |            1404 |            2806 |           10955  |
|             105 | float           |         1000000 |             300 |              50 |           24229 |             703 |            1003 |            1611 |            3108 |            6642 |           26152  |
|             106 | float           |         1000000 |             300 |             100 |           24288 |             803 |            1003 |            1604 |            3509 |            6637 |           26291  |
|             107 | float           |         1000000 |             300 |             300 |           23973 |             703 |            1003 |            1604 |            3726 |            7897 |           32173  |
|             108 | float           |         1000000 |             300 |             600 |           24848 |             803 |            1003 |            1706 |            3415 |            7222 |           27130  |
|             109 | float           |         1000000 |             600 |              50 |           49211 |            1604 |            2005 |            2915 |            6040 |           11569 |           48229  |
|             110 | float           |         1000000 |             600 |             100 |           49522 |            1705 |            1905 |            3118 |            6123 |           12232 |           50938  |
|             111 | float           |         1000000 |             600 |             300 |           52820 |            1605 |            2207 |            3419 |            6633 |           13861 |           57314  |
|             112 | float           |         1000000 |             600 |             600 |           54593 |            1604 |            2306 |            3409 |            7617 |           16344 |           56780  |
|             113 | double          |         1000000 |              50 |              50 |            5299 |             202 |             402 |             603 |            1225 |            2218 |            8224  |
|             114 | double          |         1000000 |              50 |             100 |            5271 |             202 |             302 |             606 |            1104 |            2006 |            8364  |
|             115 | double          |         1000000 |              50 |             300 |            5170 |             202 |             302 |             602 |            1109 |            2109 |            8739  |
|             116 | double          |         1000000 |              50 |             600 |            5549 |             202 |             402 |             602 |            1213 |            2426 |            9532  |
|             117 | double          |         1000000 |             100 |              50 |           10150 |             402 |             503 |             903 |            1805 |            3315 |           13687  |
|             118 | double          |         1000000 |             100 |             100 |            9419 |             302 |             502 |             903 |            1713 |            3434 |           12838  |
|             119 | double          |         1000000 |             100 |             300 |            9760 |             302 |             502 |             811 |            1708 |            3108 |           14000  |
|             120 | double          |         1000000 |             100 |             600 |            9552 |             402 |             502 |             803 |            1705 |            3532 |           13352  |
|             121 | double          |         1000000 |             300 |              50 |           28643 |            1204 |            1415 |            2446 |            4434 |            8656 |           31964  |
|             122 | double          |         1000000 |             300 |             100 |           26813 |             903 |            1103 |            1807 |            3590 |            7862 |           31683  |
|             123 | double          |         1000000 |             300 |             300 |           26410 |             803 |            1203 |            1906 |            4017 |            8358 |           30835  |
|             124 | double          |         1000000 |             300 |             600 |           26176 |             903 |            1103 |            2048 |            3712 |            6926 |           27473  |
|             125 | double          |         1000000 |             600 |              50 |           50008 |            1404 |            1804 |            2914 |            5813 |           11892 |           46801  |
|             126 | double          |         1000000 |             600 |             100 |           47067 |            1504 |            1804 |            2812 |            5614 |           11426 |           45609  |
|             127 | double          |         1000000 |             600 |             300 |           52905 |            1504 |            2006 |            3128 |            6623 |           12569 |           48958  |
|             128 | double          |         1000000 |             600 |             600 |           50002 |            1404 |            1804 |            3022 |            6437 |           12358 |           51410  |


Total experiment duration: 2205923 msec.
Repetitions per measurement: 1.

The experiment can be repeated with the command:

```bash
python3 test/benchmark_indexing.py  > ./docs/performance.md
``` 


